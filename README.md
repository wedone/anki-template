# Anki 数学卡片模板

**版本：v1.4.0**

这是一个专为数学学习设计的Anki卡片模板，具有现代化的界面和丰富的功能。

## 重要功能（预览工具）

- 本地预览和测试 Anki 数学问答卡片模板，渲染效果与 Anki 保持一致
- 字段批量输入、正反面切换、桌面/手机模式切换
- 支持 MathJax 数学公式渲染
- 预览区屏幕样式会自动同步当前模板的 `.card` 样式，实现与 Anki 卡片一致的宽度、背景、圆角等外观
- 支持多模板切换，字段、样式、预览区自动刷新

## 功能特性

### 🎨 现代化界面
- 清晰的卡片布局设计
- 响应式设计，支持PC和移动设备
- 美观的配色方案和视觉层次

### ⚙️ 智能设置系统
- **固定设置弹窗字体**：设置弹窗的字体大小和样式不受卡片内容字体设置的影响，始终保持清晰可读
- **设置持久化保存**：使用localStorage保存用户的字体大小和行间距设置，避免每次打开卡片都需要重新设置
- 实时预览设置效果
- 一键恢复默认设置

### 📚 丰富的数学内容支持
- 支持LaTeX数学公式渲染
- 解题步骤整体以统一容器展示，内容默认全部展开，去除每步数字和图标，移动端内容区域最大化显示
- 核心概念和关键公式突出显示
- 易错点警示功能
- 难度等级显示

### 🎯 学习辅助功能
- 提示功能（可点击显示/隐藏）
- 步骤式解题过程
- 最终答案突出显示
- 易错点列表

### 🧠 智能显示逻辑
- **智能字段显示**：Answer、Steps、CommonMistakes等字段只有在有内容时才显示，避免空白区域占用界面空间
- **统一判断标准**：使用`isEmptyField()`函数统一判断字段是否为空，包括空字符串和只包含空白字符的情况
- **动态界面调整**：根据字段内容动态隐藏或显示相关区域，提供更清洁的界面体验

## 文件结构

```
anki-template/
├── preview.html          # 预览文件，用于测试和展示模板效果
├── custom1/
│   ├── front.html        # 正面模板
│   ├── back.html         # 背面模板
│   └── style.css         # 样式文件
└── README.md            # 说明文档
```

## 使用方法

### 1 导入模板到Anki
1. 打开Anki2. 进入工具 > "管理笔记类型
3 选择或创建一个笔记类型4卡片按钮5custom1/front.html`的内容复制到正面模板6`custom1back.html`的内容复制到背面模板
7`custom1style.css`的内容复制到样式部分

### 2 设置字段
确保你的笔记类型包含以下字段：
- `Question` - 问题内容
- `Answer` - 答案内容
- `Image` - 图片（可选）
- `Hint` - 提示（可选）
- `Difficulty` - 难度等级（1-5）
- `Steps` - 解题步骤（用"||分隔）
- `KeyConcept` - 核心概念（可选）
- `Formula` - 关键公式（可选）
- `CommonMistakes` - 易错点（用|分隔）

### 3. 自定义设置
- 点击卡片上的⚙️ 设置按钮
- 调整字体大小（12-24px）
- 调整行间距（10.3-20）
- 设置会自动保存，下次打开卡片时会自动应用

### 4. 智能显示说明
- **Answer字段**：当答案内容为空或只包含空白字符时，整个"最终答案"区域会被隐藏
- **Steps字段**：当解题步骤为空或只包含空白字符时，整个"解题步骤"区域会被隐藏
- **CommonMistakes字段**：当易错点内容为空或只包含空白字符时，整个"易错警示"区域会被隐藏
- **其他字段**：KeyConcept和Formula字段仍使用Anki的条件渲染，只有在有内容时才显示

## 技术特性

### 设置持久化
- 使用localStorage存储用户设置
- 支持跨会话的设置保持
- 优雅的错误处理

### 字体固定
- 设置弹窗使用固定的字体样式
- 不受卡片内容字体设置影响
- 确保设置界面始终清晰可读

### 响应式设计
- 支持PC端和移动端
- 自适应不同屏幕尺寸
- 优化的触摸交互

## 浏览器兼容性

- Chrome 60refox 55 Safari 12 Edge79

## 注意事项

1. 确保Anki中启用了JavaScript支持
2. 数学公式需要网络连接来加载MathJax库3存在浏览器的localStorage中，清除浏览器数据会丢失设置
4 建议在导入模板前备份现有的笔记类型

## 更新日志

### v1.5.0（计划中）
- 🚀 预告：将集成 AnkiConnect API 功能，实现网页与本地Anki卡片数据的联动与查询

### v1.4.0
- 🆕 预览区屏幕样式自动同步 `.card` 样式，支持多模板切换
- 🆕 本地预览和测试 Anki 数学问答卡片模板，渲染效果与 Anki 保持一致
- 🆕 字段批量输入、正反面切换、桌面/手机模式切换
- 🆕 支持 MathJax 数学公式渲染

### v1.3.0
- ✅ 解题步骤区域整体美化为统一box/container，去除每步独立卡片感
- ✅ 步骤内容默认全部展开，无需点击
- ✅ 去除每步数字标题和图标，界面更简洁
- ✅ 移动端优化，内容区域最大化显示，提升小屏体验

### v1.2.0
- ✅ 添加智能字段显示功能
- ✅ 统一Answer、Steps、CommonMistakes字段的显示逻辑
- ✅ 优化界面空间利用，避免空白区域占用
- ✅ 改进字段内容判断标准

### v1.1.0
- ✅ 固定设置弹窗字体，不受卡片字体设置影响
- ✅ 添加设置持久化保存功能
- ✅ 优化设置加载和应用逻辑
- ✅ 改进错误处理机制

### v1.0.0
- 🎉 初始版本发布
- 📝 基础数学卡片模板
- 🎨 现代化界面设计
- 📱 响应式布局支持 